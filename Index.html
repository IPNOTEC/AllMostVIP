<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPNOTEC | Future Identity & Virtual Clubs</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rajdhani:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* Base colors */
            --bg: #000000;
            --card: #111111;
            --text: #ffffff;
            --neon: #ff6600;
            --glow: 0 0 10px var(--neon);

            /* Tribe colors */
            --violet: #8F00FF;
            --indigo: #4B0082;
            --blue: #00B0F0;
            --green: #45DE12;
            --yellow: #FFFF00;
            --orange: #FF6900;
            --red: #FF0000;
            --white: #FFFFFF;
            --grey: #777777;
            --black-tribe: #000000;
            
            --current-color-accent: var(--blue);
            --current-chat-color: var(--blue);

            --font-main: 'Rajdhani', sans-serif;
            --font-display: 'Orbitron', sans-serif;
            --font-id: 'Space Mono', monospace;
            --transition: all 0.3s ease;
        }

        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: var(--font-main);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Landing Page */
        .landing-page {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .cyber-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:  
                linear-gradient(rgba(143, 0, 240, 0.07) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 176, 240, 0.07) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: -1;
        }

        .landing-title {
            font-size: 4rem;
            font-weight: 900;
            margin-bottom: 1.5rem;
            color: var(--white);
            text-shadow: 0 0 15px var(--violet), 0 0 30px var(--blue);
            letter-spacing: 4px;
            font-family: var(--font-display);
            line-height: 1.2;
            text-transform: uppercase;
        }

        .landing-subtitle {
            font-size: 1.5rem;
            max-width: 800px;
            margin: 0 auto 2rem auto;
            color: #ccc;
            font-weight: 400;
            letter-spacing: 1px;
        }

        .cta-button {
            background: linear-gradient(90deg, var(--violet), var(--blue));
            color: var(--white);
            font-weight: bold;
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: var(--font-display);
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: var(--transition);
            margin-top: 2rem;
            box-shadow: 0 0 25px rgba(199, 36, 255, 0.5);
        }

        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(199, 36, 255, 0.7);
        }

        .countdown {
            margin-top: 3rem;
            font-size: 1.2rem;
            color: var(--green);
            text-shadow: 0 0 10px var(--green);
        }

        /* Navigation */
        .nav-container {
            display: flex;
            justify-content: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.8);
            border-bottom: 2px solid var(--blue);
            box-shadow: 0 0 15px rgba(0, 176, 240, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-button {
            background: rgba(0, 176, 240, 0.2);
            border: 1px solid var(--blue);
            color: var(--white);
            padding: 12px 25px;
            margin: 0 10px;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-family: var(--font-main);
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-button:hover {
            background: rgba(0, 176, 240, 0.4);
            transform: translateY(-3px);
            box-shadow: 0 0 15px var(--blue);
        }

        /* Main container */
        .container {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        /* Section styling */
        .section {
            background: rgba(0, 0, 0, 0.8);
            border: 4px solid var(--current-color-accent);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 0 20px var(--current-color-accent);
            max-width: 700px;
            width: 100%;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2rem;
            font-family: var(--font-display);
            color: var(--orange);
            text-shadow: var(--glow);
            transition: color 0.3s ease, text-shadow 0.3s ease;
        }

        h2 {
            text-align: center;
            margin: 20px 0;
            font-size: 1.8rem;
            font-family: var(--font-display);
            color: var(--blue);
            text-shadow: 0 0 10px rgba(0, 176, 240, 0.5);
        }

        /* ID Generator Styles */
        .description {
            color: var(--text);
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            font-family: var(--font-id);
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        label {
            color: var(--text);
            display: block;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            font-family: var(--font-id);
        }

        input, select {
            background: rgba(0, 0, 0, 0.7);
            color: var(--text);
            border: 1px solid var(--current-color-accent);
            padding: 0.9rem;
            border-radius: 8px;
            width: 100%;
            font-family: var(--font-id);
            font-size: 1.05rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--white);
            box-shadow: 0 0 10px var(--current-color-accent);
        }

        .id-gen-button {
            background: var(--current-color-accent);
            color: var(--black);
            font-weight: bold;
            padding: 1rem;
            border: none;
            margin-top: 2rem;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 0 15px var(--current-color-accent);
            font-family: var(--font-id);
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            width: 100%;
        }

        .id-gen-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 25px var(--current-color-accent);
        }

        .output {
            background: rgba(0, 0, 0, 0.7);
            padding: 1.5rem;
            border: 1px solid var(--current-color-accent);
            border-radius: 8px;
            margin-top: 2rem;
            font-size: 1.1rem;
            color: var(--text);
            display: none;
            box-shadow: inset 0 0 10px var(--current-color-accent);
            font-family: var(--font-id);
        }

        .output.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .number { 
            color: var(--current-color-accent); 
            font-weight: bold;
        }
        
        .highlight { 
            color: var(--white); 
            font-weight: bold;
        }

        .color-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
            position: relative;
        }

        .color-option {
            height: 40px;
            border-radius: 6px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .color-option:hover {
            transform: scale(1.05);
        }

        .color-option.selected {
            border: 2px solid var(--white);
            box-shadow: 0 0 10px var(--white);
        }

        .color-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.9rem;
            white-space: nowrap;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
            border: 1px solid var(--current-color-accent);
            pointer-events: none;
        }

        .color-option:hover .color-tooltip {
            visibility: visible;
            opacity: 1;
        }

        .user-id-output {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--current-color-accent);
            border-radius: 8px;
            text-align: center;
            font-size: 1.3rem;
            display: none;
            font-family: var(--font-id);
        }

        .user-id-output.active {
            display: block;
        }

        .future-id-section {
            display: none;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px dashed var(--current-color-accent);
        }

        .future-id-section.active {
            display: block;
        }

        .future-id-display {
            font-size: 1.5rem;
            text-align: center;
            margin-top: 1.5rem;
            line-height: 1.6;
            word-break: break-all;
        }

        .future-id-part1, .future-id-part2 {
            color: var(--current-color-accent);
        }

        .future-id-part3 {
            color: var(--white);
        }
        
        #enter-chat-button {
            display: none;
            margin-top: 2rem;
            background: linear-gradient(90deg, var(--green), var(--blue));
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-family: var(--font-display);
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(0,255,136,0.5);
            transition: all 0.3s ease;
        }

        #enter-chat-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px rgba(0,255,136,0.7);
        }

        /* Avatar Creation Styles */
        .avatar-creation {
            display: none;
        }

        .avatar-creation.active {
            display: block;
        }

        textarea {
            background: rgba(0, 0, 0, 0.7);
            color: var(--text);
            border: 1px solid var(--current-color-accent);
            padding: 0.9rem;
            border-radius: 8px;
            width: 100%;
            font-family: var(--font-id);
            font-size: 1.05rem;
            transition: all 0.3s ease;
            resize: vertical;
            min-height: 100px;
        }

        textarea:focus {
            outline: none;
            border-color: var(--white);
            box-shadow: 0 0 10px var(--current-color-accent);
        }

        /* Avatar List Styles */
        .avatar-list {
            display: none;
            width: 100%;
            max-width: 700px;
            padding: 20px;
        }

        .avatar-list.active {
            display: block;
        }

        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .avatar-card {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--current-color-accent);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 0 15px var(--current-color-accent);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .avatar-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px var(--current-color-accent);
        }

        .avatar-color {
            height: 80px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0,0,0,0.7);
        }

        .avatar-details {
            text-align: center;
        }

        .avatar-name {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .avatar-id {
            font-size: 1.1rem;
            color: var(--current-color-accent);
            margin-bottom: 10px;
            font-family: var(--font-id);
        }

        .avatar-city {
            font-size: 1.1rem;
            color: var(--white);
        }

        .avatar-purpose {
            font-size: 1rem;
            color: #ccc;
            margin-top: 10px;
            font-style: italic;
        }

        .avatar-actions {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }

        .avatar-action-btn {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid currentColor;
            background: rgba(255, 255, 255, 0.1);
        }

        .avatar-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Payment Section */
        .payment-section {
            display: none;
            text-align: center;
            padding: 2.5rem;
        }

        .payment-section.active {
            display: block;
        }

        .price {
            font-size: 2.5rem;
            font-family: var(--font-display);
            color: var(--green);
            text-shadow: 0 0 15px var(--green);
            margin: 1rem 0;
        }

        .payment-info {
            font-size: 1.1rem;
            color: #ccc;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto 2rem auto;
        }

        /* Chat Section */
        #chat-section {
            display: none;
            width: 100%;
            max-width: 1000px;
            height: 90vh;
            flex-direction: column;
            background: linear-gradient(135deg, #050505, #101010);
            border-radius: 1rem;
            border: 2px solid var(--current-chat-color);
            box-shadow: 0 0 20px var(--current-chat-color);
            overflow: hidden;
            margin-top: 20px;
        }

        .chat-header {
            background: linear-gradient(90deg, #121230, #1a1a4a);
            padding: 15px 20px;
            border-bottom: 2px solid var(--current-chat-color);
            text-align: center;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        
        .chat-header h1 {
            font-size: 2.2rem;
            text-transform: uppercase;
            background: linear-gradient(90deg, var(--violet), var(--blue), var(--green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(143, 0, 255, 0.3);
            font-family: var(--font-display);
        }
        
        .chat-header p {
            font-size: 1rem;
            color: var(--orange);
            max-width: 800px;
            margin: 0 auto;
            font-family: var(--font-main);
        }
        
        .header-controls {
            position: absolute;
            top: 15px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .home-button {
            position: absolute;
            top: 15px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--orange);
            color: var(--orange);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-family: var(--font-main);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .home-button:hover {
            background: rgba(255, 105, 0, 0.2);
            transform: translateY(-2px);
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--blue);
            color: var(--white);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-family: var(--font-main);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .control-btn:hover {
            background: rgba(0, 176, 240, 0.2);
            transform: translateY(-2px);
        }
        
        .refresh-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            color: var(--yellow);
            margin-top: 10px;
            display: inline-block;
            font-family: var(--font-main);
        }
        
        .chat-container {
            flex: 1;
            display: flex;
            overflow: hidden;
            padding: 10px;
        }
        
        .participants-panel {
            width: 200px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 15px;
            overflow-y: auto;
            border: 1px solid var(--indigo);
            box-shadow: 0 0 20px rgba(0, 112, 192, 0.2);
            margin-right: 10px;
        }
        
        .participants-panel h2 {
            font-size: 1.3rem;
            color: var(--blue);
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 1px solid var(--indigo);
            padding-bottom: 10px;
            font-family: var(--font-display);
        }
        
        .participant {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.5);
            transition: var(--transition);
            font-family: var(--font-main);
        }
        
        .participant:hover {
            background: rgba(0, 112, 192, 0.2);
            transform: translateX(5px);
        }
        
        .participant::before {
            content: "";
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .chat-window {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            border: 1px solid var(--violet);
            box-shadow: 0 0 20px rgba(143, 0, 255, 0.2);
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
        }
        
        .message {
            max-width: 80%;
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 15px;
            position: relative;
            animation: fadeIn 0.3s ease;
            word-wrap: break-word;
            font-size: 1.2rem;
            line-height: 1.5;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            font-family: var(--font-main);
        }
        
        .user-message {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--indigo), var(--blue));
            color: var(--white);
            border-bottom-right-radius: 0;
        }
        
        .bot-message {
            align-self: flex-start;
            background: rgba(30, 30, 60, 0.8);
            border-bottom-left-radius: 0;
        }
        
        .username {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .message-time {
            font-size: 0.8rem;
            opacity: 0.7;
            text-align: right;
            margin-top: 8px;
        }
        
        .chat-input {
            padding: 15px;
            background: rgba(0, 0, 0, 0.9);
            border-top: 1px solid var(--violet);
            display: flex;
        }
        
        #message-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            font-family: var(--font-main);
            font-size: 1.2rem;
            outline: none;
        }
        
        #message-input:focus {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 10px var(--blue);
        }
        
        #send-button {
            background: linear-gradient(135deg, var(--blue), var(--green));
            color: var(--white);
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            margin-left: 15px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.3rem;
        }
        
        #send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--blue);
        }
        
        .chat-color-picker {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .chat-color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }
        
        .chat-color-option:hover {
            transform: scale(1.2);
        }
        
        .chat-color-option.selected {
            border: 2px solid var(--white);
            transform: scale(1.2);
            box-shadow: 0 0 15px currentColor;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .landing-title {
                font-size: 2.5rem;
            }

            .section {
                padding: 1.5rem;
                margin-bottom: 20px;
            }
            
            h1 {
                font-size: 1.8rem;
                margin-bottom: 20px;
            }

            .avatar-grid {
                grid-template-columns: 1fr;
            }
            
            .participants-panel {
                width: 100%;
                height: 120px;
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .participants {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .participant {
                margin-bottom: 0;
                font-size: 0.85rem;
                padding: 6px;
            }
            
            .chat-header h1 {
                font-size: 1.7rem;
                margin-top: 10px;
            }
            
            .header-controls {
                position: static;
                justify-content: center;
                margin-top: 15px;
                flex-direction: column;
                gap: 5px;
            }

            .home-button {
                position: static;
                margin-bottom: 10px;
                width: 100%;
                justify-content: center;
            }
            
            .control-btn {
                width: 100%;
                justify-content: center;
            }

            .message {
                max-width: 95%;
                font-size: 1rem;
            }

            #message-input {
                font-size: 1rem;
                padding: 12px 15px;
            }

            #send-button {
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Landing Page -->
    <div class="landing-page" id="landing-page">
        <div class="cyber-grid"></div>
        <h1 class="landing-title">IPNOTEC FUTURE IDENTITY</h1>
        <p class="landing-subtitle">Forge your digital soul, connect with your future tribe, and claim your place in the new reality. Your identity is evolving. It's time to take control.</p>
        <button class="cta-button" onclick="startJourney()">BEGIN YOUR ASCENSION</button>
        <div class="countdown" id="countdown">Application launches on January 10, 2025</div>
    </div>

    <!-- Navigation -->
    <div class="nav-container" id="nav-container" style="display: none;">
        <button class="nav-button" data-section="id-generator">
            <i class="fas fa-id-card"></i> I-ID Generator
        </button>
        <button class="nav-button" data-section="avatar-creation">
            <i class="fas fa-user-plus"></i> Create Avatar
        </button>
        <button class="nav-button" data-section="avatar-list">
            <i class="fas fa-users"></i> My Avatars
        </button>
        <button class="nav-button" data-section="payment-section">
            <i class="fas fa-lock"></i> Unlock Access
        </button>
    </div>

    <!-- Main Content -->
    <div class="container" id="main-container" style="display: none;">
        <!-- I-ID Generator Section -->
        <div class="section" id="id-generator">
            <h1>IPNOTEC I-ID Generator</h1>
            <div class="description">[IPNOTEC aligns your phone number to your DOB with IP-CODE]</div>

            <div class="input-group">
                <label for="countryCode">Country Code:</label>
                <select id="countryCode">
                    <option value="">Select Country</option>
                    <option value="1">United States (+1)</option>
                    <option value="44">United Kingdom (+44)</option>
                    <option value="91">India (+91)</option>
                    <option value="86">China (+86)</option>
                    <option value="81">Japan (+81)</option>
                    <option value="49">Germany (+49)</option>
                    <option value="33">France (+33)</option>
                    <option value="7">Russia (+7)</option>
                    <option value="55">Brazil (+55)</option>
                    <option value="234">Nigeria (+234)</option>
                    <option value="27">South Africa (+27)</option>
                    <option value="971">UAE (+971)</option>
                    <option value="966">Saudi Arabia (+966)</option>
                    <option value="82">South Korea (+82)</option>
                    <option value="61">Australia (+61)</option>
                    <option value="64">New Zealand (+64)</option>
                    <option value="52">Mexico (+52)</option>
                    <option value="54">Argentina (+54)</option>
                    <option value="90">Turkey (+90)</option>
                    <option value="39">Italy (+39)</option>
                    <option value="34">Spain (+34)</option>
                    <option value="31">Netherlands (+31)</option>
                    <option value="46">Sweden (+46)</option>
                    <option value="47">Norway (+47)</option>
                    <option value="358">Finland (+358)</option>
                    <option value="45">Denmark (+45)</option>
                    <option value="41">Switzerland (+41)</option>
                    <option value="32">Belgium (+32)</option>
                    <option value="43">Austria (+43)</option>
                    <option value="353">Ireland (+353)</option>
                    <option value="351">Portugal (+351)</option>
                </select>
            </div>

            <div class="input-group">
                <label for="phone">Phone Number:</label>
                <input type="text" id="phone" placeholder="Enter phone number" inputmode="numeric" />
            </div>

            <div class="input-group">
                <label for="dob">Date of Birth:</label>
                <input type="date" id="dob" />
            </div>

            <button class="id-gen-button" onclick="generateIID()">GENERATE I-ID</button>

            <div class="output" id="output">
                <div>> Phone Sum: <span id="phoneSum" class="number"></span></div>
                <div>> DOB Sum: <span id="dobSum" class="number"></span></div>
                <div>> IPNOTEC CODE [IP-C]: <span id="ipcCode" class="number"></span></div>
                <div>> I-ID: <span id="finalIID" class="number"></span></div>
                <div class="highlight">This I-ID will be used to login to your IPNOTEC account with OTP verification.</div>
            </div>
        </div>

        <!-- Avatar Creation Section -->
        <div class="section avatar-creation" id="avatar-creation">
            <h1>CREATE YOUR AVATAR</h1>
            <div class="description">[Answer these questions to create your Future Identity Avatar]</div>
            
            <div class="input-group">
                <label for="avatarPurpose">Purpose of this Avatar?</label>
                <textarea id="avatarPurpose" placeholder="e.g., To launch a sustainable tech startup, to build a global network of artists, to explore spiritual growth..."></textarea>
            </div>
            
            <div class="input-group">
                <label for="avatarLookingFor">What does this Avatar seek?</label>
                <div style="display: flex; gap: 1rem;">
                    <textarea id="avatarLookingFor" placeholder="e.g., Seed funding and mentorship, collaborators for a film project, a community focused on mindfulness..." style="flex: 1;"></textarea>
                    <button class="id-gen-button" onclick="generateRandomAspiration()" style="margin-top: 0; width: auto;">RANDOM</button>
                </div>
            </div>
            
            <div class="input-group">
                <label for="avatarReason">Is this Avatar's purpose Personal, Professional, or Spiritual?</label>
                <select id="avatarReason">
                    <option value="PERSONAL">Personal</option>
                    <option value="PROFESSIONAL">Professional</option>
                    <option value="SPIRITUAL">Spiritual</option>
                </select>
            </div>

            <div class="input-group">
                <label>Choose Your FUTURE TRIBE:</label>
                <div class="color-options">
                    <div class="color-option" style="background-color: var(--violet);" data-color="violet" data-code="VIP" data-chat-color="violet">
                        <span class="color-tooltip">Venture Capitalists & Wealth</span>
                    </div>
                    <div class="color-option" style="background-color: var(--indigo);" data-color="indigo" data-code="IPI" data-chat-color="indigo">
                        <span class="color-tooltip">IT and Industrialists</span>
                    </div>
                    <div class="color-option" style="background-color: var(--blue);" data-color="blue" data-code="IPB" data-chat-color="blue">
                        <span class="color-tooltip">Branding and Marketing</span>
                    </div>
                    <div class="color-option" style="background-color: var(--green);" data-color="green" data-code="IPG" data-chat-color="green">
                        <span class="color-tooltip">Green Footprint & Environmentalists</span>
                    </div>
                    <div class="color-option" style="background-color: var(--yellow);" data-color="yellow" data-code="IPY" data-chat-color="yellow">
                        <span class="color-tooltip">Young Entrepreneurs & Educationalists</span>
                    </div>
                    <div class="color-option" style="background-color: var(--orange);" data-color="orange" data-code="IPO" data-chat-color="orange">
                        <span class="color-tooltip">Oracle of Bharat & Sanskrit Revivers</span>
                    </div>
                    <div class="color-option" style="background-color: var(--red);" data-color="red" data-code="IPR" data-chat-color="red">
                        <span class="color-tooltip">Real Estate and Recreationists</span>
                    </div>
                    <div class="color-option" style="background-color: var(--white); border: 1px solid #000;" data-color="white" data-code="IPW" data-chat-color="white">
                        <span class="color-tooltip">Health and Policy Makers</span>
                    </div>
                    <div class="color-option" style="background-color: var(--grey);" data-color="grey" data-code="IPGY" data-chat-color="grey">
                        <span class="color-tooltip">NOMADS and Just CURIOUS</span>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <label for="futureCity">Future City:</label>
                <select id="futureCity">
                    <option value="">Select Your Future City</option>
                    <option value="DEL">Delhi (DEL)</option>
                    <option value="BOM">Mumbai (BOM)</option>
                    <option value="BLR">Bangalore (BLR)</option>
                    <option value="MAA">Chennai (MAA)</option>
                    <option value="HYD">Hyderabad (HYD)</option>
                    <option value="CCU">Kolkata (CCU)</option>
                    <option value="LHR">London (LHR)</option>
                    <option value="JFK">New York (JFK)</option>
                    <option value="LAX">Los Angeles (LAX)</option>
                    <option value="CDG">Paris (CDG)</option>
                    <option value="SIN">Singapore (SIN)</option>
                    <option value="SYD">Sydney (SYD)</option>
                    <option value="DXB">Dubai (DXB)</option>
                    <option value="HKG">Hong Kong (HKG)</option>
                    <option value="FRA">Frankfurt (FRA)</option>
                    <option value="ICN">Seoul (ICN)</option>
                </select>
            </div>

            <div class="input-group">
                <label for="futureName">Your Future Name (or generate random):</label>
                <div style="display: flex; gap: 1rem;">
                    <input type="text" id="futureName" placeholder="Enter your future name" style="flex: 1;" />
                    <button class="id-gen-button" onclick="generateRandomName()" style="margin-top: 0; width: auto;">RANDOM</button>
                </div>
            </div>

            <button class="id-gen-button" onclick="generateAvatar()">CREATE AVATAR</button>

            <div class="user-id-output" id="avatarOutput">
                <div style="color: white;">YOUR IPNOTEC AVATAR IS READY:</div>
                <div class="future-id-display">
                    <span class="future-id-part1" id="avatarIdPart1"></span>.<span class="future-id-part2" id="avatarIdPart2"></span>.<span class="future-id-part3" id="avatarIdPart3"></span>
                </div>
            </div>
        </div>

        <!-- Avatar List Section -->
        <div class="section avatar-list" id="avatar-list">
            <h1>MY AVATARS</h1>
            <div class="description">Your created IPNOTEC Future Identities</div>
            
            <div class="avatar-grid" id="avatar-container">
                <!-- Avatar cards will be populated here -->
            </div>
        </div>

        <!-- Payment Section -->
        <div class="section payment-section" id="payment-section">
            <h1>UNLOCK IPNOTEC ACCESS</h1>
            <div class="description">Secure your place in the IPNOTEC ecosystem with a one-time installation fee</div>
            
            <div class="payment-info">
                <p>Your avatars are ready! To connect to the FUTURE 11 chat rooms and access the full IPNOTEC experience, complete your registration with a one-time payment of ₹1001.</p>
                <p>The official IPNOTEC application launches on <strong>January 10, 2025</strong>. Upon payment, you'll receive installation instructions via SMS.</p>
            </div>
            
            <div class="price">₹1001</div>
            
            <button class="id-gen-button" onclick="processPayment()">PROCEED TO PAYMENT</button>
            
            <div id="payment-success" style="display: none; margin-top: 2rem; text-align: center;">
                <h3 style="color: var(--green);">Payment Successful!</h3>
                <p>You will receive installation instructions via SMS. The app will be available on January 10, 2025.</p>
            </div>
        </div>

        <!-- Chat Section -->
        <div id="chat-section">
            <div class="chat-header">
                <button class="home-button" onclick="goToAvatarList()">
                    <i class="fas fa-arrow-left"></i> Avatars
                </button>
                <h1 id="chat-club-code">FUTURE 11 CHAT ROOM</h1>
                <p>Connect with like-minded individuals in your FUTURE 11 group</p>
                
                <div class="header-controls">
                    <button class="control-btn" id="refresh-btn">
                        <i class="fas fa-sync-alt"></i> Refresh Chat
                    </button>
                </div>
                
                <div class="refresh-info">
                    <i class="fas fa-clock"></i> Next refresh at <span id="next-refresh-time">10:01 PM</span>
                </div>
            </div>
            
            <div class="chat-container">
                <div class="participants-panel">
                    <h2>Participants</h2>
                    <div class="participants" id="participants-list">
                        <!-- Participants will be populated here -->
                    </div>
                </div>
                
                <div class="chat-window">
                    <div class="chat-messages" id="chat-messages">
                        <!-- Messages will appear here -->
                    </div>
                    
                    <div class="chat-input">
                        <input type="text" id="message-input" placeholder="Type your message...">
                        <button id="send-button"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Application State ---
        let currentAvatar = null;
        let avatars = JSON.parse(localStorage.getItem('ipnotecAvatars')) || [];
        let currentColorForID = 'blue';
        let currentColorCode = 'IPB';
        let userFutureCity = '';
        let userFutureName = '';
        let userChatColor = 'blue';
        let messages = [];
        let participants = new Set();
        let nextRefreshTime;
        let chatRoomActive = false;
        let chatRoomTimeout;

        // Color name mappings
        const idGenColorMap = {
            violet: "#8F00FF", indigo: "#4B0082", blue: "#00B0F0", green: "#45DE12",
            yellow: "#FFFF00", orange: "#FF6900", red: "#FF0000", white: "#FFFFFF",
            grey: "#777777"
        };

        // Bot names by avatar type
        const botNames = {
            PERSONAL: ["MindExplorer", "SoulSeeker", "InnerVoice", "TrueSelf", "Harmony"],
            PROFESSIONAL: ["QuantumX", "NovaNode", "CyberSynth", "FutureTech", "VortexMind"],
            SPIRITUAL: ["ZenMaster", "CosmicGuide", "EternalFlame", "DivineSpark", "EnlightenedOne"]
        };

        // Random name generators by tribe color
        const randomNames = {
            violet: ["Venture", "Innovate", "Wealth", "Capital", "Insight", "Prosper", "Dynasty"],
            indigo: ["TechMind", "Circuit", "Industrial", "Binary", "Processor", "Engineer", "Innovator"],
            blue: ["Brand", "Market", "Vision", "Campaign", "Strategy", "Impact", "Connect"],
            green: ["EcoMind", "Sustain", "Greenova", "Biotech", "Harvest", "Renew", "Planet"],
            yellow: ["YouthFlux", "Edunova", "Spark", "GenZ", "FutureEdu", "Catalyst", "BrightMind"],
            orange: ["Oracle", "Culture", "Legacy", "Tradition", "Wisdom", "Heritage", "Revive"],
            red: ["Realty", "Leisure", "Estate", "Architect", "Vibes", "Resort", "Harmony"],
            white: ["Health", "Policy", "Wellbeing", "Govern", "Equity", "Care", "Regulate"],
            grey: ["Nomad", "Curious", "Explorer", "Wanderer", "Seeker", "Observer", "Traveler"]
        };

        // Random aspirations by type
        const randomAspirations = {
            PERSONAL: [
                "to find inner peace and balance in life",
                "to build meaningful relationships with like-minded people",
                "to explore personal growth and self-discovery",
                "to achieve work-life balance and happiness",
                "to develop new hobbies and creative outlets"
            ],
            PROFESSIONAL: [
                "to launch a successful startup in the tech industry",
                "to build a global network of professionals in my field",
                "to find mentors and investors for my business ideas",
                "to collaborate on innovative projects with experts",
                "to advance my career through strategic connections"
            ],
            SPIRITUAL: [
                "to deepen my spiritual practice and understanding",
                "to connect with others on a similar spiritual journey",
                "to explore meditation and mindfulness techniques",
                "to understand the deeper meaning of existence",
                "to achieve enlightenment and inner peace"
            ]
        };

        // --- DOM Ready ---
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', function() {
                    const section = this.dataset.section;
                    showSection(section);
                });
            });
            
            // Set max date for DOB to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dob').setAttribute('max', today);

            // Set up color selection for avatar creation
            const colorOptions = document.querySelectorAll('#avatar-creation .color-options .color-option');
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    colorOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    currentColorForID = this.dataset.color;
                    currentColorCode = this.dataset.code;
                    userChatColor = this.dataset.chatColor;
                });
            });
            
            // Set default selected color for avatar creation (blue)
            const defaultColorOption = document.querySelector('#avatar-creation .color-options .color-option[data-color="blue"]');
            if (defaultColorOption) {
                defaultColorOption.classList.add('selected');
                currentColorForID = defaultColorOption.dataset.color;
                currentColorCode = defaultColorOption.dataset.code;
                userChatColor = defaultColorOption.dataset.chatColor;
            }
            
            // Load avatars if any
            if (avatars.length > 0) {
                renderAvatarList();
            }
            
            // Set up chat event listeners
            setupChatListeners();
            
            // Set up countdown to January 10
            updateCountdown();
        });

        // --- Navigation Functions ---
        function startJourney() {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('nav-container').style.display = 'flex';
            document.getElementById('main-container').style.display = 'flex';
            showSection('id-generator');
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById('chat-section').style.display = 'none';
            
            if (sectionId === 'id-generator') {
                document.getElementById('id-generator').style.display = 'block';
            } else if (sectionId === 'avatar-creation') {
                document.getElementById('avatar-creation').style.display = 'block';
                document.getElementById('avatar-creation').classList.add('active');
            } else if (sectionId === 'avatar-list') {
                document.getElementById('avatar-list').style.display = 'block';
                document.getElementById('avatar-list').classList.add('active');
                renderAvatarList();
            } else if (sectionId === 'payment-section') {
                document.getElementById('payment-section').style.display = 'block';
                document.getElementById('payment-section').classList.add('active');
            }
        }
        
        function goToAvatarList() {
            document.getElementById('chat-section').style.display = 'none';
            showSection('avatar-list');
            clearTimeout(chatRoomTimeout);
            chatRoomActive = false;
        }

        // --- I-ID Generation Functions ---
        function digitalRoot(num) {
            while (num >= 10) {
                num = num.toString().split('').reduce((a, b) => a + parseInt(b), 0);
            }
            return num;
        }
        
        function validatePhone(phone) {
            return phone.replace(/\D/g, '');
        }
        
        function generateIID() {
            const countryCode = document.getElementById('countryCode').value;
            const phone = validatePhone(document.getElementById('phone').value);
            const dobRaw = document.getElementById('dob').value;
            
            // Input validation
            if (!countryCode) {
                alert("Please select a country code.");
                return;
            }
            if (!phone) {
                alert("Please enter a valid phone number.");
                return;
            }
            if (!dobRaw) {
                alert("Please enter a valid Date of Birth.");
                return;
            }
            
            const phoneDigits = countryCode + phone;
            const phoneSum = phoneDigits.split('').reduce((sum, d) => sum + parseInt(d), 0);
            const phoneSingle = digitalRoot(phoneSum);
            
            const dobDigits = dobRaw.replace(/\D/g, '');
            const dobSum = dobDigits.split('').reduce((sum, d) => sum + parseInt(d), 0);
            const dobSingle = digitalRoot(dobSum);
            
            let ipc = dobSingle - phoneSingle;
            if (ipc < 0) ipc = 9 + ipc;
            
            const finalIID = phoneDigits + ipc;
            
            // Display results
            document.getElementById('output').classList.add('active');
            document.getElementById('phoneSum').innerText = phoneSingle;
            document.getElementById('dobSum').innerText = dobSingle;
            document.getElementById('ipcCode').innerText = ipc;
            document.getElementById('finalIID').innerText = finalIID;
            
            // Show avatar creation section
            showSection('avatar-creation');
        }

        // --- Avatar Creation Functions ---
        function generateRandomName() {
            const names = randomNames[currentColorForID];
            if (names && names.length > 0) {
                const randomName = names[Math.floor(Math.random() * names.length)];
                document.getElementById('futureName').value = randomName;
            } else {
                document.getElementById('futureName').value = "Anonymous";
            }
        }
        
        function generateRandomAspiration() {
            const reason = document.getElementById('avatarReason').value;
            const aspirations = randomAspirations[reason];
            if (aspirations && aspirations.length > 0) {
                const randomAspiration = aspirations[Math.floor(Math.random() * aspirations.length)];
                document.getElementById('avatarLookingFor').value = randomAspiration;
            }
        }
        
        function generateAvatar() {
            const purpose = document.getElementById('avatarPurpose').value.trim();
            const lookingFor = document.getElementById('avatarLookingFor').value.trim();
            const reason = document.getElementById('avatarReason').value;
            userFutureCity = document.getElementById('futureCity').value;
            userFutureName = document.getElementById('futureName').value.trim();
            
            if (!purpose) {
                alert("Please describe the purpose of your avatar.");
                return;
            }
            if (!lookingFor) {
                alert("Please describe what your avatar is seeking.");
                return;
            }
            if (!userFutureCity) {
                alert("Please select your Future City.");
                return;
            }
            if (!userFutureName) {
                alert("Please enter or generate your Future Name.");
                return;
            }
            
            // Format the Avatar ID
            document.getElementById('avatarIdPart1').innerText = currentColorCode;
            document.getElementById('avatarIdPart2').innerText = userFutureCity;
            document.getElementById('avatarIdPart3').innerText = userFutureName;
            
            // Apply color to parts
            const colorValue = idGenColorMap[currentColorForID];
            document.querySelector('.future-id-part1').style.color = colorValue;
            document.querySelector('.future-id-part2').style.color = colorValue;
            
            // Show the Avatar ID
            document.getElementById('avatarOutput').classList.add('active');
            
            // Create and save avatar
            const avatar = {
                id: `${currentColorCode}.${userFutureCity}.${userFutureName}`,
                name: userFutureName,
                city: userFutureCity,
                tribe: currentColorCode,
                color: currentColorForID,
                purpose: purpose,
                lookingFor: lookingFor,
                reason: reason,
                timestamp: new Date().toISOString()
            };
            
            avatars.push(avatar);
            localStorage.setItem('ipnotecAvatars', JSON.stringify(avatars));
            
            // Show avatar list
            showSection('avatar-list');
        }

        // --- Avatar Management ---
        function renderAvatarList() {
            const container = document.getElementById('avatar-container');
            container.innerHTML = '';
            
            if (avatars.length === 0) {
                container.innerHTML = '<p style="text-align: center; padding: 20px;">No avatars created yet. Create one in the Avatar Creation section.</p>';
                return;
            }
            
            avatars.forEach(avatar => {
                const card = document.createElement('div');
                card.className = 'avatar-card';
                card.innerHTML = `
                    <div class="avatar-color" style="background-color: ${idGenColorMap[avatar.color]};">
                        ${avatar.tribe}
                    </div>
                    <div class="avatar-details">
                        <div class="avatar-name">${avatar.name}</div>
                        <div class="avatar-id">${avatar.id}</div>
                        <div class="avatar-city">${avatar.city}</div>
                        <div class="avatar-purpose">${avatar.purpose.substring(0, 60)}${avatar.purpose.length > 60 ? '...' : ''}</div>
                    </div>
                    <div class="avatar-actions">
                        <button class="avatar-action-btn" onclick="enterChatWithAvatar('${avatar.id}')">
                            <i class="fas fa-comments"></i> Chat
                        </button>
                        <button class="avatar-action-btn" onclick="deleteAvatar('${avatar.id}')">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }
        
        function deleteAvatar(avatarId) {
            if (!confirm('Are you sure you want to delete this avatar?')) return;
            
            avatars = avatars.filter(avatar => avatar.id !== avatarId);
            localStorage.setItem('ipnotecAvatars', JSON.stringify(avatars));
            renderAvatarList();
            
            if (currentAvatar && currentAvatar.id === avatarId) {
                currentAvatar = null;
            }
        }
        
        function enterChatWithAvatar(avatarId) {
            currentAvatar = avatars.find(avatar => avatar.id === avatarId);
            if (!currentAvatar) return;
            
            // Check if payment has been made
            const paymentMade = localStorage.getItem('ipnotecPayment') === 'true';
            if (!paymentMade) {
                alert("Please complete the payment to access FUTURE 11 chat rooms.");
                showSection('payment-section');
                return;
            }
            
            enterChatRoom();
        }

        // --- Chat Room Functions ---
        function enterChatRoom() {
            if (!currentAvatar) return;
            
            document.getElementById('chat-section').style.display = 'flex';
            
            // Update chat header
            document.getElementById('chat-club-code').textContent = `FUTURE 11 | ${currentAvatar.reason} | ${currentAvatar.city}`;
            document.documentElement.style.setProperty('--current-chat-color', idGenColorMap[currentAvatar.color]);
            
            initChat();
        }
        
        function initChat() {
            // Add user and bots to participants
            participants = new Set();
            participants.add(currentAvatar.name);
            
            // Add bots based on avatar type
            const bots = botNames[currentAvatar.reason];
            for (let i = 0; i < 10; i++) {
                participants.add(bots[i % bots.length] + (i > 4 ? " " + (Math.floor(i/5)+1) : ""));
            }
            
            renderParticipants();
            
            // Initial system messages for chat
            messages = [];
            addSystemMessage(`Welcome to FUTURE 11, ${currentAvatar.name}!`);
            addSystemMessage(`This is a ${currentAvatar.reason.toLowerCase()} chat room for like-minded individuals.`);
            addSystemMessage("Chat refreshes twice daily at 10:01 AM/PM. The room will close after 12 hours of inactivity.");
            
            // Simulate initial bot messages based on avatar type
            setTimeout(() => {
                if (currentAvatar.reason === 'PERSONAL') {
                    addBotMessage("What are your personal growth goals for this year?");
                } else if (currentAvatar.reason === 'PROFESSIONAL') {
                    addBotMessage("What industry are you most excited about right now?");
                } else {
                    addBotMessage("How do you practice mindfulness in your daily life?");
                }
            }, 1000);
            
            setTimeout(() => {
                if (currentAvatar.reason === 'PERSONAL') {
                    addBotMessage("I've been journaling every morning and it's transformed my mindset");
                } else if (currentAvatar.reason === 'PROFESSIONAL') {
                    addBotMessage("AI is definitely disrupting traditional business models across sectors");
                } else {
                    addBotMessage("Meditation has helped me find clarity in challenging times");
                }
            }, 3000);
            
            setupRefreshSchedule();
            
            // Set timeout for chat room (12 hours of inactivity)
            resetChatTimeout();
        }
        
        function resetChatTimeout() {
            clearTimeout(chatRoomTimeout);
            chatRoomTimeout = setTimeout(() => {
                if (chatRoomActive) {
                    addSystemMessage("Chat room is closing due to inactivity.");
                    setTimeout(() => {
                        goToAvatarList();
                    }, 2000);
                }
            }, 12 * 60 * 60 * 1000); // 12 hours
        }
        
        function renderParticipants() {
            const container = document.getElementById("participants-list");
            container.innerHTML = "";
            
            participants.forEach(participant => {
                const isUser = participant === currentAvatar.name;
                let displayColorClass;
                
                if (isUser) {
                    displayColorClass = currentAvatar.color;
                } else {
                    // Assign colors to bots based on their names
                    const colorKeys = Object.keys(idGenColorMap);
                    const colorIndex = participant.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0) % colorKeys.length;
                    displayColorClass = colorKeys[colorIndex];
                }
                
                const element = document.createElement("div");
                element.className = `participant`;
                element.style.backgroundColor = `rgba(${hexToRgb(idGenColorMap[displayColorClass])}, 0.2)`;
                element.style.borderLeft = `3px solid ${idGenColorMap[displayColorClass]}`;
                
                if (isUser) {
                    element.innerHTML = `<strong>${participant}</strong> <span style="opacity:0.7">(${currentAvatar.tribe})</span>`;
                } else {
                    element.textContent = participant;
                }
                
                container.appendChild(element);
            });
        }
        
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? 
                `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : 
                '0, 176, 240';
        }
        
        function addSystemMessage(text) {
            const element = document.createElement("div");
            element.className = "message system-message";
            element.innerHTML = `<div style="text-align: center; color: var(--yellow); padding: 10px; border-radius: 10px; background: rgba(255,255,0,0.1);">${text}</div>`;
            document.getElementById("chat-messages").appendChild(element);
            scrollChatToBottom();
        }
        
        function addBotMessage(text) {
            const participantsArray = Array.from(participants).filter(p => p !== currentAvatar.name);
            const botName = participantsArray[Math.floor(Math.random() * participantsArray.length)];
            const colorKeys = Object.keys(idGenColorMap);
            const colorIndex = botName.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0) % colorKeys.length;
            const randomColor = colorKeys[colorIndex];
            
            addMessage(botName, text, randomColor);
        }
        
        function addMessage(sender, text, color, isUser = false) {
            const timestamp = new Date();
            messages.push({ sender, text, color, timestamp, isUser });
            renderMessages();
            scrollChatToBottom();
            resetChatTimeout();
        }
        
        function renderMessages() {
            const container = document.getElementById("chat-messages");
            container.innerHTML = "";
            
            messages.forEach(msg => {
                const messageElement = document.createElement("div");
                messageElement.className = `message ${msg.isUser ? "user-message" : "bot-message"}`;
                
                // Format time as HH:MM
                const hours = msg.timestamp.getHours().toString().padStart(2, "0");
                const minutes = msg.timestamp.getMinutes().toString().padStart(2, "0");
                const timeString = `${hours}:${minutes}`;
                
                messageElement.innerHTML = `
                    <div class="username" style="color: ${idGenColorMap[msg.color] || '#00B0F0'}">
                        <i class="fas fa-user"></i> ${msg.sender}
                    </div>
                    <div class="message-text">${msg.text}</div>
                    <div class="message-time">${timeString}</div>
                `;
                
                container.appendChild(messageElement);
            });
        }
        
        function scrollChatToBottom() {
            const messagesContainer = document.getElementById("chat-messages");
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function setupRefreshSchedule() {
            const now = new Date();
            const nextAM = new Date(now);
            nextAM.setHours(10, 1, 0, 0);
            
            const nextPM = new Date(now);
            nextPM.setHours(22, 1, 0, 0);
            
            if (now < nextAM) {
                nextRefreshTime = nextAM;
            } else if (now < nextPM) {
                nextRefreshTime = nextPM;
            } else {
                nextAM.setDate(nextAM.getDate() + 1);
                nextRefreshTime = nextAM;
            }
            
            document.getElementById("next-refresh-time").textContent = 
                formatTime(nextRefreshTime.getHours(), nextRefreshTime.getMinutes());
            
            const timeUntilRefresh = nextRefreshTime.getTime() - now.getTime();
            setTimeout(performChatRefresh, timeUntilRefresh);
        }
        
        function formatTime(hours, minutes) {
            const period = hours >= 12 ? "PM" : "AM";
            const displayHours = hours % 12 || 12;
            return `${displayHours}:${minutes.toString().padStart(2, "0")} ${period}`;
        }
        
        function performChatRefresh() {
            messages = [];
            renderMessages();
            addSystemMessage("Chat refreshed at " + new Date().toLocaleTimeString());
            setupRefreshSchedule();
        }
        
        // --- Payment Functions ---
        function processPayment() {
            // Simulate payment processing
            setTimeout(() => {
                localStorage.setItem('ipnotecPayment', 'true');
                document.getElementById('payment-success').style.display = 'block';
                
                // Show message about January 10 launch
                setTimeout(() => {
                    alert("Thank you for your payment! You will receive installation instructions via SMS. The IPNOTEC application will be available on January 10, 2025.");
                    showSection('avatar-list');
                }, 1000);
            }, 2000);
        }
        
        // --- Countdown Function ---
        function updateCountdown() {
            const launchDate = new Date('2025-01-10');
            const now = new Date();
            const diff = launchDate - now;
            
            if (diff <= 0) {
                document.getElementById('countdown').textContent = "IPNOTEC is now available!";
                return;
            }
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            
            document.getElementById('countdown').textContent = `Application launches in ${days} days and ${hours} hours`;
        }
        
        function setupChatListeners() {
            document.getElementById("send-button").addEventListener("click", sendMessage);
            
            document.getElementById("message-input").addEventListener("keypress", (e) => {
                if (e.key === "Enter") {
                    sendMessage();
                }
            });
            
            document.getElementById("refresh-btn").addEventListener("click", () => {
                messages = [];
                renderMessages();
                addSystemMessage("Chat has been manually refreshed");
            });
        }
        
        function sendMessage() {
            const input = document.getElementById("message-input");
            const message = input.value.trim();
            
            if (message && currentAvatar) {
                addMessage(currentAvatar.name, message, currentAvatar.color, true);
                input.value = "";
                
                // Simulate bot response after delay
                setTimeout(() => {
                    let response;
                    
                    if (currentAvatar.reason === 'PERSONAL') {
                        const responses = [
                            "That's an interesting perspective on personal growth.",
                            "I've had similar experiences in my journey.",
                            "How has that approach worked for you?",
                            "That's a valuable insight for self-improvement.",
                            "I appreciate you sharing that personal reflection."
                        ];
                        response = responses[Math.floor(Math.random() * responses.length)];
                    } else if (currentAvatar.reason === 'PROFESSIONAL') {
                        const responses = [
                            "That's a strategic approach to professional development.",
                            "How has that strategy impacted your business or career?",
                            "We've implemented something similar in our organization.",
                            "That's a key challenge many professionals face.",
                            "Could you elaborate on how you implemented that?"
                        ];
                        response = responses[Math.floor(Math.random() * responses.length)];
                    } else {
                        const responses = [
                            "That resonates with my spiritual journey.",
                            "How has that practice enhanced your spiritual connection?",
                            "I've found similar peace through meditation.",
                            "That's a profound insight into consciousness.",
                            "Thank you for sharing your spiritual perspective."
                        ];
                        response = responses[Math.floor(Math.random() * responses.length)];
                    }
                    
                    addBotMessage(response);
                }, 1000 + Math.random() * 2000);
            }
        }
    </script>
</body>
</html>
